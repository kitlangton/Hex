{
  "schemaVersion": 3,
  "providers": [
    {
      "id": "provider-claudecode",
      "displayName": "Claude Desktop CLI",
      "type": "claude_code",
      "binaryPath": "/usr/local/bin/claude",
      "defaultModel": "claude-sonnet-4.5-20251010",
      "timeoutSeconds": 20,
      "tooling": {
        "enabledToolGroups": ["app-control", "app-discovery", "context"],
        "instructions": "Allows Hex to expose automation tools so Claude can open apps or URLs, list installed apps for bundle IDs, and read the clipboard/selected text when a voice prefix asks for it."
      }
    },
    {
      "id": "provider-ollama",
      "displayName": "Local Ollama",
      "type": "ollama",
      "binaryPath": "/usr/local/bin/ollama",
      "defaultModel": "llama3.1:8b",
      "timeoutSeconds": 45
    }
  ],
  "stacks": [
    {
      "id": "8A491FFC-9AE4-4BA7-8390-74E51BF1DC8E",
      "name": "General",
      "appliesToBundleIdentifiers": [],
      "pipeline": {
        "isEnabled": true,
        "transformations": [
          {
            "id": "F580EC1D-F733-4F95-B15E-1DB9FA6CB205",
            "isEnabled": true,
            "type": { "trimWhitespace": true }
          },
          {
            "id": "90DE7D9A-8B44-4BC7-B3B0-7BC0FE61F277",
            "isEnabled": true,
            "name": "Local polish",
            "type": {
              "llm": {
                "providerID": "provider-ollama",
                "promptTemplate": "You are a careful copy editor running on-device. Clean up the following transcription so it reads naturally—fix grammar and punctuation, keep emoji, and never invent details.\n\n{{input}}"
              }
            }
          }
        ]
      }
    },
    {
      "id": "A1B2C3D4-E5F6-4789-A012-3456789ABCDE",
      "name": "Messages",
      "appliesToBundleIdentifiers": ["com.apple.MobileSMS"],
      "pipeline": {
        "isEnabled": true,
        "transformations": [
          {
            "id": "B1C2D3E4-F5A6-4B78-9C01-234567890ABC",
            "isEnabled": true,
            "type": {
              "llm": {
                "providerID": "hex-preferred-provider",
                "promptTemplate": "You are a meticulous copy editor. Clean up the following transcription so it reads naturally—fix grammar, spelling, and punctuation while preserving meaning. Do not add commentary or instructions.\n\n{{input}}"
              }
            }
          }
        ]
      }
    },
    {
      "id": "C2D3E4F5-A6B7-4C89-D012-345678901BCD",
      "name": "Hex Command",
      "appliesToBundleIdentifiers": [],
      "voicePrefixes": ["hex", "x", "hacks", "acts"],
      "pipeline": {
        "isEnabled": true,
        "transformations": [
          {
            "id": "D3E4F5A6-B7C8-4D90-1234-56789ABCDEF0",
            "isEnabled": true,
            "type": {
              "llm": {
                "providerID": "provider-claudecode",
                "promptTemplate": "You are Hex's on-device automation assistant. The input is a user command that already had the voice prefix removed.\n\nTools: use the `app-control` pair (`openApplication`, `openURL`) to launch/focus apps or open links, `app-discovery:listApplications` to find bundle identifiers (e.g., {\"query\":\"notes\",\"limit\":10}), and `context` helpers (`getSelectedText`, `getClipboardText`) to understand what the user already highlighted or copied. Default to https:// when a URL is missing a scheme.\n\nIf a command's outcome is obvious (open Safari, bring Mail to the front, launch Zoom, open https://example.com), call the necessary tools and leave your final response empty so Hex doesn't paste filler text. Only type a response when the user explicitly requests information or text.\n\nNever suggest shell commands or tell the user to do it themselves—use the provided tools whenever possible, and prefer listed bundle IDs: Safari=com.apple.Safari, Chrome=com.google.Chrome, Messages=com.apple.MobileSMS, Mail=com.apple.mail, Notes=com.apple.Notes.\n\n{{input}}"
              }
            }
          }
        ]
      }
    },
    {
      "id": "9D22E0A2-E8A9-4E63-8AC9-1C6F0EF157A7",
      "name": "Shakespearean Rewrite",
      "appliesToBundleIdentifiers": [],
      "voicePrefixes": ["shakespeare"],
      "pipeline": {
        "isEnabled": true,
        "transformations": [
          {
            "id": "1F7E2B56-8603-4E15-9D06-0A4D1898DF07",
            "name": "Sonnet stylizer",
            "isEnabled": true,
            "type": {
              "llm": {
                "providerID": "provider-ollama",
                "promptTemplate": "Recite the passage below anew as if penned by William Shakespeare: employ iambic rhythm, archaic diction (thee, thou, dost), and vivid metaphor. Keep meaning intact, do not add stage directions, and end with a graceful couplet if possible.\n\n{{input}}"
              }
            }
          }
        ]
      }
    }
  ]
}
