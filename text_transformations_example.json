{
  "schemaVersion": 3,
  "providers": [
    {
      "id": "provider-claudecode",
      "type": "claude_code",
      "binaryPath": "/usr/local/bin/claude",
      "defaultModel": "claude-sonnet-4-5-20250929",
      "timeoutSeconds": 20,
      "tooling": {
        "enabledToolGroups": ["app-control"],
        "instructions": "Allows Hex to expose automation tools so Claude can launch or focus macOS apps when a voice prefix asks for it."
      }
    }
  ],
  "stacks": [
    {
      "id": "8A491FFC-9AE4-4BA7-8390-74E51BF1DC8E",
      "name": "General",
      "appliesToBundleIdentifiers": [],
      "pipeline": {
        "isEnabled": true,
        "transformations": [
          {
            "id": "F580EC1D-F733-4F95-B15E-1DB9FA6CB205",
            "isEnabled": true,
            "type": { "trimWhitespace": true }
          }
        ]
      }
    },
    {
      "id": "A1B2C3D4-E5F6-4789-A012-3456789ABCDE",
      "name": "Messages",
      "appliesToBundleIdentifiers": ["com.apple.MobileSMS"],
      "pipeline": {
        "isEnabled": true,
        "transformations": [
          {
            "id": "B1C2D3E4-F5A6-4B78-9C01-234567890ABC",
            "isEnabled": true,
            "type": {
              "llm": {
                "providerID": "provider-claudecode",
                "promptTemplate": "You are a meticulous copy editor. Clean up the following transcription so it reads naturally—fix grammar, spelling, and punctuation while preserving meaning. Do not add commentary or instructions.\n\n{{input}}"
              }
            }
          }
        ]
      }
    },
    {
      "id": "C2D3E4F5-A6B7-4C89-D012-345678901BCD",
      "name": "Hex Command",
      "appliesToBundleIdentifiers": [],
      "voicePrefixes": ["hex", "x", "hacks", "acts"],
      "pipeline": {
        "isEnabled": true,
        "transformations": [
          {
            "id": "D3E4F5A6-B7C8-4D90-1234-56789ABCDEF0",
            "isEnabled": true,
            "type": {
              "llm": {
                "providerID": "provider-claudecode",
                "promptTemplate": "You are Hex's on-device automation assistant. The input is a user command that already had the voice prefix removed.\n\nIf the user asks to open, launch, or switch to an app, call the `app-control` tool `openApplication` with JSON arguments such as {\"bundleIdentifier\":\"com.apple.Safari\",\"activate\":true}. Use these bundle IDs when obvious: Safari=com.apple.Safari, Chrome=com.google.Chrome, Messages=com.apple.MobileSMS, Mail=com.apple.mail, Notes=com.apple.Notes.\n\nOnly after running the necessary tools (or determining none are needed) reply with a brief confirmation or answer. Never suggest shell commands or tell the user to do it themselves—use the provided tools whenever possible. Output ONLY the final answer/confirmation—no extra commentary.\n\n{{input}}"
              }
            }
          }
        ]
      }
    }
  ]
}
